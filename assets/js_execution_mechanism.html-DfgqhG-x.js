import{_ as t,c as l,e,d as n,a as s,r as p,o as h}from"./app-D3EIeNJ3.js";const r="/assets/72c5656c1e15a695fb3a3a96ec3381cd2487fb2e-CUZZLtOu.png",k={};function d(c,i){const a=p("Mermaid");return h(),l("div",null,[i[0]||(i[0]=e(`<h2 id="经典面试题" tabindex="-1"><a class="header-anchor" href="#经典面试题"><span>经典面试题</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">	console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 问:输出的顺序是什么</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 答1, 3, 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>延时了1秒钟, 所以是132, 合理.</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 问:输出的顺序是什么</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 答1, 3, 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为什么延时0秒, 不应该是立即执行么, 怎么还是132?</p><h2 id="线程" tabindex="-1"><a class="header-anchor" href="#线程"><span>线程</span></a></h2><p>JavaScript语言的一大特点就是<mark>单线程</mark>, 也就是说, <mark>同一时间只能做一件事</mark>.</p><div class="hint-container note"><p class="hint-container-title">注</p><p>这是因为JavaScript这门脚本语言诞生的使命所致的.</p><p>JavaScript是为处理页面中用户的交互, 以及操作DOM而诞生的.比如我们对某个DOM元素进行添加和删除操作, 不能同时进行.应该先添加, 之后再删除.</p><p>单线程就意味着, 所有任务需要排队, 前一个任务结束, 才会执行后一个任务.这样所导致的问题是:</p><p>如果JS执行的时间过长, 就会造成页面渲染不连贯, 导致页面渲染加载堵塞感.</p><p>为了解决这个问题, 利用多核CPU的算力, Html5提出Web Worker标准, 运行JavaScript脚本创建多个线程.于是, JS中出现了<mark>同步</mark>和<mark>异步</mark>.</p></div><h3 id="同步" tabindex="-1"><a class="header-anchor" href="#同步"><span>同步</span></a></h3><p>前一个任务结束后再执行后一个任务, 程序的执行顺序与任务的排队顺序是一致的, 同步的. 举个例子:</p><p>洗米花费5分钟, 煮饭花费40分钟, 饭熟了才去切菜花费5分钟, 炒菜花费30分钟, 一共花费了1个小时30分钟. 看不懂? 上图!</p>`,11)),n(a,{code:"eJxLy8kvT85ILCpRCHGxfrZl+vONm02fdrS9nDRfQVfXTuF567qXS9eaGCAJPe1of9E/B0VR0ySgiDGyomcNu1+sW2j4dEP/s+nbjKAyXACrmzfC"}),i[1]||(i[1]=s("h3",{id:"异步",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#异步"},[s("span",null,"异步")])],-1)),i[2]||(i[2]=s("p",null,"你在做一件事情时, 因为这件事情会花费很长时间, 在做这件事的同时, 可以去处理其他事情. 举个例子:",-1)),i[3]||(i[3]=s("p",null,"洗米花费5分钟, 煮饭花费40小时, 饭还有35分钟熟的时候, 去切菜花费5分钟, 炒菜花费30分钟, 这时饭刚好熟了, 一共花费了45个小时. 看不懂? 上图!",-1)),n(a,{code:"eJxLy8kvT85ILCpRCHGxfrZl+vONm02fdrS9nDRfQVfXTuF567qXS9eaGCAJPWvY/WLdQhOoKmssKp52tL/on4NiTNMkoIgxbmO4AI3mReg="}),i[4]||(i[4]=e('<h3 id="本质" tabindex="-1"><a class="header-anchor" href="#本质"><span>本质</span></a></h3><p>同步和异步本质就是执行顺序的不同.</p><h3 id="同步任务" tabindex="-1"><a class="header-anchor" href="#同步任务"><span>同步任务</span></a></h3><p>同步任务都是在主线程上执行, 形成一个<mark>执行栈</mark></p><h3 id="异步任务" tabindex="-1"><a class="header-anchor" href="#异步任务"><span>异步任务</span></a></h3><p>JS 的异步是通过回调函数实现的.</p><p>一般而言, 异步任务有以下3种类型.</p><ol><li>普通事件, 如<code>click</code>, <code>resize</code>等.</li><li>资源加载, 如<code>load</code>, <code>error</code>等.</li><li>定时器, 包括<code>setInterval</code>, <code>setTimeout</code>等.</li></ol><p>异步任务相关添加到<mark>任务队列</mark>中(任务队列也称为<mark>消息队列</mark>).</p><h2 id="机制" tabindex="-1"><a class="header-anchor" href="#机制"><span>机制</span></a></h2><ol><li>先执行<mark>执行栈中的同步任务</mark>. <ol><li>输出<code>1</code>.</li><li>输出<code>3</code>.</li></ol></li><li>异步任务放入<mark>任务队列</mark>中. <ol><li>记录<code>setTimeout(console.log(2), 0)</code>.</li></ol></li><li>一旦执行栈的所有同步任务执行完毕, 系统就会按次序读取<mark>消息队列</mark>中的异步任务, 于是被读取的异步任务结束等待状态, 进入执行栈, 开始执行. <ol><li>输出<code>2</code>.</li></ol></li></ol><p>由于主线程不断的重复获取任务, 执行任务, 再获取任务, 再执行, 所以这种机制被称为<mark>事件循环</mark>(event loop).</p><figure><img src="'+r+'" alt="72c5656c1e15a695fb3a3a96ec3381cd2487fb2e" tabindex="0" loading="lazy"><figcaption>72c5656c1e15a695fb3a3a96ec3381cd2487fb2e</figcaption></figure>',13))])}const g=t(k,[["render",d]]),m=JSON.parse('{"path":"/knowledge/programming_language/javascript/js_execution_mechanism.html","title":"JS 执行机制","lang":"zh-CN","frontmatter":{"title":"JS 执行机制","createTime":"2024/10/02 14:53:08","description":"经典面试题 延时了1秒钟, 所以是132, 合理. 为什么延时0秒, 不应该是立即执行么, 怎么还是132? 线程 JavaScript语言的一大特点就是单线程, 也就是说, 同一时间只能做一件事. 注 这是因为JavaScript这门脚本语言诞生的使命所致的. JavaScript是为处理页面中用户的交互, 以及操作DOM而诞生的.比如我们对某个DO...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JS 执行机制\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-02-04T07:26:46.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://docs.elake.top/knowledge/programming_language/javascript/js_execution_mechanism.html"}],["meta",{"property":"og:site_name","content":"洱海文档"}],["meta",{"property":"og:title","content":"JS 执行机制"}],["meta",{"property":"og:description","content":"经典面试题 延时了1秒钟, 所以是132, 合理. 为什么延时0秒, 不应该是立即执行么, 怎么还是132? 线程 JavaScript语言的一大特点就是单线程, 也就是说, 同一时间只能做一件事. 注 这是因为JavaScript这门脚本语言诞生的使命所致的. JavaScript是为处理页面中用户的交互, 以及操作DOM而诞生的.比如我们对某个DO..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-04T07:26:46.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-04T07:26:46.000Z"}]]},"readingTime":{"minutes":2.98,"words":894},"git":{"createdTime":1770190006000,"updatedTime":1770190006000,"contributors":[{"name":"Erhai-lake","username":"Erhai-lake","email":"erhai.lake.0714@gmail.com","commits":1,"avatar":"https://avatars.githubusercontent.com/Erhai-lake?v=4","url":"https://github.com/Erhai-lake"}]},"autoDesc":true,"filePathRelative":"knowledge/programming_language/javascript/js_execution_mechanism.md","headers":[]}');export{g as comp,m as data};
