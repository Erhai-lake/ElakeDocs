name: deploy blog to aliyun
on:
    push:
        branches:
        - master

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        # 使用 node:20
        - name: Use Node.js 20
          uses: actions/setup-node@v1
          with:
            node-version: 20

        # 安装 pnpm
        - name: Install pnpm
          run: npm install -g pnpm

         # 安装 Docusaurus 依赖
        - name: Install Docusaurus dependencies
          run: pnpm i

        # 清理 Docusaurus 缓存
        - name: Docusaurus clear
          run: pnpm run docusaurus clear

        # 构建 Docusaurus 项目
        - name: Docusaurus build
          run: pnpm run docusaurus build

        # 输出
        - name: pwd
          run: pwd
